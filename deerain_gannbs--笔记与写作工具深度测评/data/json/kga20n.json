{
  "body_html": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><div data-type=\"danger\" class=\"ne-alert\"><p id=\"4c13ff2c30f3452d0f83877b160bb2ae\" class=\"ne-p\"><span class=\"ne-text\">widget block 好像快要推出了，这应该算是思源笔记 1.0 ~ 2.0 中最大的特性之一，所以我觉得很有必要写个预测短篇在这里挂一下，希望看到这里的各位在这个功能落地之后不要仅仅把它当做 geek 玩具</span></p></div><p id=\"811505f27544f8fc510710987b666a08\" class=\"ne-p\"><br></p><h1 id=\"9RjFa\"><span class=\"ne-text\">widget block</span></h1><p id=\"97ffca6a28e3dc0d551f69f0e1760cdb\" class=\"ne-p\"><span class=\"ne-text\">思源笔记刚更新到 1.0 的时候，我向开发者询问了一下 github 上开发计划中写的「widget block」是个什么，通过他的简短回复，我觉得这个东西很好理解，就是一个可编程、可调用思源内部数据的 iframe 块（后面的内容全是基于这一点，千万不要被打脸🤡）。</span></p><p id=\"9ee159b0fa3233721665ebb446777333\" class=\"ne-p\"><br></p><p id=\"3f8b8415b28f456dbb8e4cb7b18a1d93\" class=\"ne-p\"><img src=\"https://cdn.nlark.com/yuque/0/2021/png/995602/1616781451768-76e2f233-0f70-4b29-8072-ce5c8b2bf412.png\" width=\"1070\" id=\"Mdq17\" class=\"ne-image\"></p><p id=\"f3ec15dfcd55e0c0c04b9b5265e2bd59\" class=\"ne-p\"><br></p><p id=\"f1ea531e6e26d39e4019dee00bc89c17\" class=\"ne-p\"><span class=\"ne-text\">既然它是一个 iframe 块，肯定会让人在第一时间想到番茄钟、天气、日历、动画之类的东西。我知道我说这种话可能会让一些已经跃跃欲试的用户讨厌我，但我还是要说，这些应用没什么意义。</span></p><p id=\"53a79c0a9c63cd0fadcf034ef4333970\" class=\"ne-p\"><br></p><p id=\"a62a285734bf1ad9faa7a3762e982a83\" class=\"ne-p\"><span class=\"ne-text\">原因很简单，上面这些应用靠普通 iframe 嵌入</span><strong><span class=\"ne-text\">现成</span></strong><span class=\"ne-text\">网页就行，以前我在别的编辑器里早就试玩过这些，不实用。当然不实用也可能只是对我个人来说不实用，但普通 iframe 就能做到这些是肯定的，嵌入现成网页还不用自己费劲做，所以光是做这些的话何必要什么 widget block 呢？</span></p><p id=\"c2d86a67ff90edddb1250e654ff4ca0e\" class=\"ne-p\"><br></p><p id=\"00e4f47a7dcd1dc646ced3ac3d970a81\" class=\"ne-p\"><span class=\"ne-text\">虽然 widget block 是可编程的，但单纯编程的话再强也不可能强过直接嵌入 codepen，而即使是直接嵌入 codepen 也没在别的软件里衍生出什么真正高效的玩法。我见过最骚的嵌入 codepen 玩法无非就是写个自己都玩不下去的粗糙小游戏嵌入文档里，个人用户做这种事的唯一作用就是截个图发网上引来几个萌新点赞喊 666，对一个针对知识管理的笔记软件来说，往这方面去折腾肯定不是正途。</span></p><p id=\"793a59ede6091190557565fcd1f0df54\" class=\"ne-p\"><br></p><p id=\"46e4b0b7530b96b058722f4dc9729a8d\" class=\"ne-p\"><span class=\"ne-text\">因为有「嵌入 codepen 」这个天花板在，问题就变得很好分析了——widget block 的应用方向不是深挖可编程性，而是要注重与思源内部笔记数据的联动，尽量向 airtable </span><span class=\"ne-text\" style=\"color: rgb(18, 18, 18); font-size: 15px\">scripting app</span><span class=\"ne-text\"> 的思路看齐，我想这才是推出这个功能的根本目的。如果 widget block 只是用来做天气时钟小动画之类的就太浪费热心用户的开发精力了。</span></p><p id=\"30ca7bbe6cb6bcdbca72a9e5f77ee517\" class=\"ne-p\"><br></p><p id=\"31850c5d2c1b850ece0bd36089198f28\" class=\"ne-p\"><span class=\"ne-text\">虽然还没见过原型，但 widget block 调用思源内部笔记数据的方式很好猜，应该是以搜索语句为基础，再加入列表语法糖来方便用户用 id 手动加入某个或某几个特定的块，除了调用已有的块，可能还会提供创建块的功能。widget block 在获取这些笔记数据之后，需要做的就是对这些数据进行处理或呈现，这就是「</span><strong><span class=\"ne-text\">视图</span></strong><span class=\"ne-text\">」。</span></p><p id=\"fe59e252cb121e17f5c99fbed546f87e\" class=\"ne-p\"><br></p><h1 id=\"bfFwp\"><span class=\"ne-text\">视图</span></h1><p id=\"77d0f9c51fa4b311496d16669714f482\" class=\"ne-p\"><span class=\"ne-text\">我记得开发者很早就敲定了「视图」的发展方向（应该是在 github 上说的），这种产品眼光是非常先进的，在双链时代，笔记软件折腾来折腾去都是在折腾「组织方式」，把这一步做完善之后，下一步就是「呈现方式」，也就是视图。</span></p><p id=\"f19492c4d5410c29119f569b0124fc35\" class=\"ne-p\"><br></p><p id=\"30ff697241f4a6be518067ca190260bf\" class=\"ne-p\"><span class=\"ne-text\">所谓的视图，就是把一组已有的数据用特定方式来呈现，最典型的就是 notion 的 database，但是我在</span><a href=\"https://www.yuque.com/deerain/gannbs/oss2e4\" data-href=\"https://www.yuque.com/deerain/gannbs/oss2e4\" class=\"ne-link\"><span class=\"ne-text\">这篇文章</span></a><span class=\"ne-text\">里分析过 notion 的不足，首先是作用域的问题：在 notion 中，database 里的每一个 page 必须跟 database 绑定在一起，如果移出 database 它就成了一个普普通通的页面，而 database 也会凭空少掉一个元素。</span></p><p id=\"90874db63b90167c205d0570398b5b50\" class=\"ne-p\"><br></p><p id=\"f34f16a69bd26c4838d7560404f92c73\" class=\"ne-p\"><span class=\"ne-text\">而 widget block 不一样，它调用的每一个块可以存在于思源笔记本的各个不同的位置，在 widget block 里只需要用搜索语句或 id 来调用它们就行了。换句话说，每个块可以存在于它本来应该待的位置，没必要为了这个 widget block 跑过来。即使直接把这个 widget block 删掉，对这些数据的本体也不会有任何影响。</span></p><p id=\"895765f97e39fb278b121c544d12f262\" class=\"ne-p\"><br></p><p id=\"01098c9e952146780501360b80d3808f\" class=\"ne-p\"><span class=\"ne-text\">调用到这些块的数据之后，widget block 就可以通过一些代码处理并呈现它们，比较普通的呈现方式就是 notion 那几种视图了，比如表格和看板。用 widget block 实现的视图在交互上肯定比 notion 糙一些，但数据源是比 notion 的 database 灵活得多的。</span></p><p id=\"7e4ff49a13ad46093aecd33b6037b52b\" class=\"ne-p\"><br></p><p id=\"54194385932f0a74f9b76f77cc697cb0\" class=\"ne-p\"><span class=\"ne-text\">notion 的第二个问题是它的视图太平庸，说这种话一点都不事后诸葛亮，表格看板日历就是人人都能想到的东西，更别说列表视图完全就是个凑数的。实际上视图有很多种可能，比如</span><a href=\"https://zhuanlan.zhihu.com/p/289356513\" data-href=\"https://zhuanlan.zhihu.com/p/289356513\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">这种视图</span></a><span class=\"ne-text\">，从知识管理的层面来说是非常先进的；Trilium 的 relation map note 和 Tiddlywiki 的固定式关系图也很值得一学，因为每个元素都是自己往图上添加的，位置都是自己固定的，实用性比这些双链笔记的混乱关系图强太多了。不过这些视图目前在 widget block 里可能不太好实现，坐标数据没地方存，毕竟思源好像还不支持自定义块属性，自己手动在 IAL 里写入的块属性会被思源刷掉。</span></p><p id=\"44516b96728e86678ab45c5faac498a4\" class=\"ne-p\"><br></p><p id=\"3c03b8e07b1983a3741db1c0d6898857\" class=\"ne-p\"><span class=\"ne-text\">在「选出某些数据用某种方式呈现」这个过程中，除了「怎么呈现数据」之外，「怎么选取数据」也大有文章可做。比如说，如果某个文档的存在意义就是通过反链来汇总大量数据，靠侧栏来观看就有些痛苦了，这个时候可以通过一段 sql 来查询出反链的数据，然后用 widget block 来呈现它们。比起用 </span><code class=\"ne-code\"><span class=\"ne-text\">!{{ }}</span></code><span class=\"ne-text\"> 直接嵌入这段查询，widget block 可以赋予这些数据更丰富的呈现形式，或是通过代码做一些比 sql 更好写的数据清洗。</span></p><p id=\"e35b07715b8a94728bdfe158d66db955\" class=\"ne-p\"><br></p><p id=\"3b52032575fa0d4c49f449cbe770133a\" class=\"ne-p\"><span class=\"ne-text\">另外，既然 widget block 是个思源笔记的块，就意味着它可以直接加入链接关系网中、可以用 bookmark 管理、可以用文本三剑客批量更改，这些也是 notion 比不上的。</span></p><p id=\"724c3137c46244d5d1cda3ff8b8b2faa\" class=\"ne-p\"><br></p><p id=\"4aa2a01a266bcfad7f7deeab1b43ee7a\" class=\"ne-p\"><span class=\"ne-text\">虽然没我总结得全面，但英文网络上也有类似的讨论，某些我互动得比较多的开发者也已经在往这些方向去做，Obsidian 社区已经有了这种萌芽意识（用表格展示既有数据的 Dataview 插件），</span><a href=\"https://www.yuque.com/arvinxx/note/airtable#JuMxx\" data-href=\"https://www.yuque.com/arvinxx/note/airtable#JuMxx\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">Airtable 也具备这样的能力</span></a><span class=\"ne-text\">，而且目前来看它可能是做得最好的。我每天刷链滴和 github，发现思源的社区对这方面的讨论是一片空白，故写此文。</span></p><p id=\"acd9de3ef33adef928e6b1765d49cfbb\" class=\"ne-p\"><br></p><p id=\"7998c73f887b345942c7d057ade2e766\" class=\"ne-p\"><br></p></div>",
  "slug": 33683512,
  "title": "中期预言：widget block 与「视图」"
}