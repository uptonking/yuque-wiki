{
  "body_html": "<!doctype html><div class=\"lake-content\" typography=\"classic\"><h1 id=\"2af1a3fb\"><span class=\"ne-text\">原生API编写简单富文本编辑器001</span></h1><p id=\"ubc5b902f\" class=\"ne-p\"><br></p><p id=\"ucb85b401\" class=\"ne-p\"><span class=\"ne-text\">从这一节开始，我们将亲自动手，使用我们之前介绍过的浏览器原生API来实现一个简单的可以处理文本的富文本编辑器。</span></p><p id=\"u02af54ad\" class=\"ne-p\"><br></p><h2 id=\"af980619\"><span class=\"ne-text\">1. 设计</span></h2><p id=\"u79108c10\" class=\"ne-p\"><br></p><p id=\"ub5c93055\" class=\"ne-p\"><span class=\"ne-text\">这一个简单版的编辑器，由于我们是基于原生的API，基于浏览器原生API的能力，我们将实现以下功能：</span></p><p id=\"u870f3cea\" class=\"ne-p\"><br></p><ul class=\"ne-ul\"><li id=\"u29f1b5ae\"><span class=\"ne-text\"> 文字输入 </span></li></ul><ul class=\"ne-ul\"><li id=\"u6e9021c6\"><span class=\"ne-text\"> 文字格式调整 </span></li></ul><ul class=\"ne-list-wrap\"><ul ne-level=\"1\" class=\"ne-ul\"><li id=\"u48a6ace0\"><span class=\"ne-text\">加粗</span></li></ul></ul><ul class=\"ne-list-wrap\"><ul ne-level=\"1\" class=\"ne-ul\"><li id=\"ubbee5e6e\"><span class=\"ne-text\">斜体</span></li></ul></ul><ul class=\"ne-list-wrap\"><ul ne-level=\"1\" class=\"ne-ul\"><li id=\"ufac4d618\"><span class=\"ne-text\">下划线</span></li></ul></ul><ul class=\"ne-list-wrap\"><ul ne-level=\"1\" class=\"ne-ul\"><li id=\"u2c8aafd6\"><span class=\"ne-text\">删除线</span></li></ul></ul><ul class=\"ne-list-wrap\"><ul ne-level=\"1\" class=\"ne-ul\"><li id=\"ud4167dc0\"><span class=\"ne-text\">前景色</span></li></ul></ul><ul class=\"ne-list-wrap\"><ul ne-level=\"1\" class=\"ne-ul\"><li id=\"u96c517fd\"><span class=\"ne-text\">背景色</span></li></ul></ul><ul class=\"ne-list-wrap\"><ul ne-level=\"1\" class=\"ne-ul\"><li id=\"u8def7642\"><span class=\"ne-text\">改变字号</span></li></ul></ul><ul class=\"ne-list-wrap\"><ul ne-level=\"1\" class=\"ne-ul\"><li id=\"u9e4bc3a4\"><span class=\"ne-text\">改变字体</span></li></ul></ul><ul class=\"ne-list-wrap\"><ul ne-level=\"1\" class=\"ne-ul\"><li id=\"ua120e501\"><span class=\"ne-text\">上角标</span></li></ul></ul><ul class=\"ne-list-wrap\"><ul ne-level=\"1\" class=\"ne-ul\"><li id=\"ua1eb45cd\"><span class=\"ne-text\">下角标</span></li></ul></ul><ul class=\"ne-ul\"><li id=\"u594814ef\"><span class=\"ne-text\"> 段落格式调整 </span></li></ul><ul class=\"ne-list-wrap\"><ul ne-level=\"1\" class=\"ne-ul\"><li id=\"uddac2f00\"><span class=\"ne-text\">清除格式</span></li></ul></ul><ul class=\"ne-list-wrap\"><ul ne-level=\"1\" class=\"ne-ul\"><li id=\"u76fe150b\"><span class=\"ne-text\">首行缩进</span></li></ul></ul><ul class=\"ne-list-wrap\"><ul ne-level=\"1\" class=\"ne-ul\"><li id=\"uef65e785\"><span class=\"ne-text\">段落居左对齐</span></li></ul></ul><ul class=\"ne-list-wrap\"><ul ne-level=\"1\" class=\"ne-ul\"><li id=\"uc0e7428d\"><span class=\"ne-text\">段落居右对齐</span></li></ul></ul><ul class=\"ne-list-wrap\"><ul ne-level=\"1\" class=\"ne-ul\"><li id=\"u94683bc7\"><span class=\"ne-text\">段落居中对齐</span></li></ul></ul><ul class=\"ne-list-wrap\"><ul ne-level=\"1\" class=\"ne-ul\"><li id=\"u5a30b6d8\"><span class=\"ne-text\">段落两端对齐</span></li></ul></ul><ul class=\"ne-list-wrap\"><ul ne-level=\"1\" class=\"ne-ul\"><li id=\"u0ace6def\"><span class=\"ne-text\">插入有序列表</span></li></ul></ul><ul class=\"ne-list-wrap\"><ul ne-level=\"1\" class=\"ne-ul\"><li id=\"u5ad72af3\"><span class=\"ne-text\">插入无序列表</span></li></ul></ul><ul class=\"ne-ul\"><li id=\"uc8df5e3d\"><span class=\"ne-text\"> 其它 </span></li></ul><ul class=\"ne-list-wrap\"><ul ne-level=\"1\" class=\"ne-ul\"><li id=\"u9c6449d2\"><span class=\"ne-text\">插入超链接</span></li></ul></ul><ul class=\"ne-list-wrap\"><ul ne-level=\"1\" class=\"ne-ul\"><li id=\"u14e1a2e3\"><span class=\"ne-text\">取消超链接</span></li></ul></ul><ul class=\"ne-list-wrap\"><ul ne-level=\"1\" class=\"ne-ul\"><li id=\"ue3d00331\"><span class=\"ne-text\">插入网络图片</span></li></ul></ul><ul class=\"ne-list-wrap\"><ul ne-level=\"1\" class=\"ne-ul\"><li id=\"u2c8fd837\"><span class=\"ne-text\">拷贝</span></li></ul></ul><ul class=\"ne-list-wrap\"><ul ne-level=\"1\" class=\"ne-ul\"><li id=\"uafcb8d40\"><span class=\"ne-text\">剪切</span></li></ul></ul><ul class=\"ne-list-wrap\"><ul ne-level=\"1\" class=\"ne-ul\"><li id=\"u65b32c15\"><span class=\"ne-text\">撤销</span></li></ul></ul><ul class=\"ne-list-wrap\"><ul ne-level=\"1\" class=\"ne-ul\"><li id=\"u38c1d2c5\"><span class=\"ne-text\">重做</span></li></ul></ul><p id=\"u654877b9\" class=\"ne-p\"><br></p><h2 id=\"fa95b2f8\"><span class=\"ne-text\">2. 图标准备</span></h2><p id=\"udcbf25ec\" class=\"ne-p\"><br></p><p id=\"udf7dc3a2\" class=\"ne-p\"><span class=\"ne-text\">通常，当用户使用富文本编辑器时，都希望点击一个按钮来实现某种功能，而传统的按钮太过丑陋，所以我们为其准备一个按钮图标。</span></p><p id=\"u0490817a\" class=\"ne-p\"><br></p><p id=\"udc5b44ad\" class=\"ne-p\"><span class=\"ne-text\">这里，我们使用</span><code class=\"ne-code\"><span class=\"ne-text\">iconfont.cn</span></code><span class=\"ne-text\"> 上提供的免费图标。</span></p><p id=\"u3b97376f\" class=\"ne-p\"><br></p><p id=\"uee6eb9ef\" class=\"ne-p\"><span class=\"ne-text\">我们可以进入</span><a href=\"http://iconfont.cn\" data-href=\"http://iconfont.cn\" target=\"_blank\" class=\"ne-link\"><span class=\"ne-text\">iconfont</span></a><span class=\"ne-text\"> 官网，登陆后，新建一个项目：</span></p><p id=\"u110728b0\" class=\"ne-p\"><br></p><p id=\"u7b6aec3d\" class=\"ne-p\"><img src=\"https://gitee.com/hjb2722404/tuchuang/raw/master/img/202203101510248.png\" width=\"1555\" id=\"hFghb\" class=\"ne-image\"></p><p id=\"u44aa50df\" class=\"ne-p\"><br></p><p id=\"u491937a7\" class=\"ne-p\"><span class=\"ne-text\">然后根据功能设计，将免费图标先添加到购物车，再导入到项目中：</span></p><p id=\"u795be40c\" class=\"ne-p\"><br></p><p id=\"u9147a24b\" class=\"ne-p\"><img src=\"https://gitee.com/hjb2722404/tuchuang/raw/master/img/202203101518863.png\" width=\"1102\" id=\"zjp76\" class=\"ne-image\"></p><p id=\"uc8511354\" class=\"ne-p\"><br></p><h2 id=\"b0597c93\"><span class=\"ne-text\">3. 编写界面</span></h2><p id=\"u5191233b\" class=\"ne-p\"><br></p><h3 id=\"2c086b2e\"><span class=\"ne-text\">3.1 初始结构</span></h3><p id=\"u6c0d80a8\" class=\"ne-p\"><br></p><pre data-language=\"shell\" id=\"f362352c\" class=\"ne-codeblock language-shell\">\n ├── index.html\n └── static\n     ├── css\n     │   ├── iconfont\n     │   │   ├── demo.css\n     │   │   ├── demo_index.html\n     │   │   ├── iconfont.css\n     │   │   ├── iconfont.js\n     │   │   ├── iconfont.json\n     │   │   ├── iconfont.svg\n     │   │   ├── iconfont.ttf\n     │   │   ├── iconfont.woff\n     │   │   └── iconfont.woff2\n     │   └── index.css\n     └── js\n     \t |——index.js</pre><p id=\"u7e041fc4\" class=\"ne-p\"><br></p><h3 id=\"bc92bbbb\"><span class=\"ne-text\">3.2 html结构：</span></h3><p id=\"uc3b3d749\" class=\"ne-p\"><br></p><pre data-language=\"html\" id=\"bf3b062f\" class=\"ne-codeblock language-html\">&lt;!DOCTYPE html&gt;\n&lt;html lang=&quot;en&quot;&gt;\n&lt;head&gt;\n    &lt;meta charset=&quot;UTF-8&quot;&gt;\n    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;\n    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;\n    &lt;title&gt;Document&lt;/title&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;./static/css/index.css&quot;&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;./static/css/iconfont/iconfont.css&quot;&gt;\n    &lt;script src=&quot;./static/css/iconfont/iconfont.js&quot;&gt;&lt;/script&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;div class=&quot;editor-box&quot;&gt;\n        &lt;div class=&quot;editor&quot;&gt;\n            &lt;div id=&quot;editorBar&quot; class=&quot;editor-toolbar&quot;&gt;\n                &lt;ul&gt;\n                    &lt;li command=&quot;undo&quot;&gt;&lt;i class=&quot;iconfont icon-chexiao&quot; title=&quot;撤销&quot;&gt;&lt;/i&gt;&lt;/li&gt;\n                    &lt;li command=&quot;redo&quot;&gt;&lt;i class=&quot;iconfont icon-zhongzuo&quot; title=&quot;重做&quot;&gt;&lt;/i&gt;&lt;/li&gt;\n                    &lt;li command=&quot;copy&quot;&gt;&lt;i class=&quot;iconfont icon-fuzhi&quot; title=&quot;复制&quot;&gt;&lt;/i&gt;&lt;/li&gt;\n                    &lt;li command=&quot;cut&quot;&gt;&lt;i class=&quot;iconfont icon-jianqie&quot; title=&quot;剪切&quot;&gt;&lt;/i&gt;&lt;/li&gt;\n                    &lt;li command=&quot;fontName&quot;&gt;&lt;i class=&quot;iconfont icon-ziti&quot; title=&quot;字体&quot;&gt;&lt;/i&gt;&lt;/li&gt;\n                    &lt;li command=&quot;fontSize&quot;&gt;&lt;i class=&quot;iconfont icon-zihao&quot; title=&quot;字号&quot;&gt;&lt;/i&gt;&lt;/li&gt;\n                    &lt;li command=&quot;Bold&quot;&gt;&lt;i class=&quot;iconfont icon-zitijiacu&quot; title=&quot;加粗&quot;&gt;&lt;/i&gt;&lt;/li&gt;\n                    &lt;li command=&quot;italic&quot;&gt;&lt;i class=&quot;iconfont icon-zitixieti&quot; title=&quot;斜体&quot;&gt;&lt;/i&gt;&lt;/li&gt;\n                    &lt;li command=&quot;underline&quot;&gt;&lt;i class=&quot;iconfont icon-zitixiahuaxian&quot; title=&quot;下划线&quot;&gt;&lt;/i&gt;&lt;/li&gt;\n                    &lt;li command=&quot;strikeThrough&quot;&gt;&lt;i class=&quot;iconfont icon-zitishanchuxian&quot; title=&quot;删除线&quot;&gt;&lt;/i&gt;&lt;/li&gt;\n                    &lt;li command=&quot;superscript&quot;&gt;&lt;i class=&quot;iconfont icon-zitishangbiao&quot; title=&quot;上标&quot;&gt;&lt;/i&gt;&lt;/li&gt;\n                    &lt;li command=&quot;subscript&quot;&gt;&lt;i class=&quot;iconfont icon-zitixiabiao&quot; title=&quot;下标&quot;&gt;&lt;/i&gt;&lt;/li&gt;\n                    &lt;li command=&quot;fontColor&quot;&gt;&lt;i class=&quot;iconfont icon-qianjingse&quot; title=&quot;字体颜色&quot;&gt;&lt;/i&gt;&lt;/li&gt;\n                    &lt;li command=&quot;backColor&quot;&gt;&lt;i class=&quot;iconfont icon-zitibeijingse&quot; title=&quot;字体背景色&quot;&gt;&lt;/i&gt;&lt;/li&gt;\n                    &lt;li command=&quot;removeFormat&quot;&gt;&lt;i class=&quot;iconfont icon-qingchugeshi&quot; title=&quot;清除格式&quot;&gt;&lt;/i&gt;&lt;/li&gt;\n                    &lt;li command=&quot;insertOrderedList&quot;&gt;&lt;i class=&quot;iconfont icon-youxuliebiao&quot; title=&quot;有序列表&quot;&gt;&lt;/i&gt;&lt;/li&gt;\n                    &lt;li command=&quot;insertUnorderedList&quot;&gt;&lt;i class=&quot;iconfont icon-wuxuliebiao&quot; title=&quot;无序列表&quot;&gt;&lt;/i&gt;&lt;/li&gt;\n                    &lt;li command=&quot;justifyLeft&quot;&gt;&lt;i class=&quot;iconfont icon-juzuoduiqi&quot; title=&quot;局左对齐&quot;&gt;&lt;/i&gt;&lt;/li&gt;\n                    &lt;li command=&quot;justifyRight&quot;&gt;&lt;i class=&quot;iconfont icon-juyouduiqi&quot; title=&quot;居右对齐&quot;&gt;&lt;/i&gt;&lt;/li&gt;\n                    &lt;li command=&quot;justifyCenter&quot;&gt;&lt;i class=&quot;iconfont icon-juzhongduiqi&quot; title=&quot;居中对齐&quot;&gt;&lt;/i&gt;&lt;/li&gt;\n                    &lt;li command=&quot;justifyFull&quot;&gt;&lt;i class=&quot;iconfont icon-liangduanduiqi&quot; title=&quot;两端对齐&quot;&gt;&lt;/i&gt;&lt;/li&gt;\n                    &lt;li command=&quot;createLink&quot;&gt;&lt;i class=&quot;iconfont icon-charulianjie&quot; title=&quot;插入链接&quot;&gt;&lt;/i&gt;&lt;/li&gt;\n                    &lt;li command=&quot;unlink&quot;&gt;&lt;i class=&quot;iconfont icon-quxiaolianjie&quot; title=&quot;取消链接&quot;&gt;&lt;/i&gt;&lt;/li&gt;\n                    &lt;li command=&quot;indent&quot;&gt;&lt;i class=&quot;iconfont icon-shouhangsuojin&quot; title=&quot;首行缩进&quot;&gt;&lt;/i&gt;&lt;/li&gt;\n                    &lt;li command=&quot;insertImage&quot;&gt;&lt;i class=&quot;iconfont icon-tupian&quot; title=&quot;插入图片&quot;&gt;&lt;/i&gt;&lt;/li&gt;\n                &lt;/ul&gt;\n            &lt;/div&gt;\n            &lt;div id=&quot;editor-content&quot; class=&quot;editor-content&quot; contenteditable&gt;&lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n&lt;/body&gt;\n&lt;script src=&quot;./static/js/index.js&quot;&gt;&lt;/script&gt;\n&lt;/html&gt;</pre><p id=\"ub5910777\" class=\"ne-p\"><br></p><div class=\"ne-quote\"><p id=\"ud3bb8e45\" class=\"ne-p\"><strong><span class=\"ne-text\">注意</span></strong><span class=\"ne-text\">：</span></p><p id=\"u493fe8c3\" class=\"ne-p\"><span class=\"ne-text\"> </span></p><p id=\"u9d43b532\" class=\"ne-p\"><span class=\"ne-text\">我们这里为每一个按钮所在 </span><code class=\"ne-code\"><span class=\"ne-text\">li</span></code><span class=\"ne-text\"> 元素添加了</span><code class=\"ne-code\"><span class=\"ne-text\">command</span></code><span class=\"ne-text\"> 属性，这个属性就是当点击该按钮时需要传递给</span></p><p id=\"u827293fe\" class=\"ne-p\"><span class=\"ne-text\"> </span></p><p id=\"ua476b765\" class=\"ne-p\"><code class=\"ne-code\"><span class=\"ne-text\">document.execCommand(command);</span></code><span class=\"ne-text\"> 命令的命令名称参数。</span></p></div><p id=\"u7684ba58\" class=\"ne-p\"><br></p><h3 id=\"deb91ff7\"><span class=\"ne-text\">3.3 css</span></h3><p id=\"u1a8c9661\" class=\"ne-p\"><br></p><pre data-language=\"css\" id=\"c350a8b7\" class=\"ne-codeblock language-css\">.editor-box {\n    width: 960px;\n    margin: auto;\n}\n\n.editor {\n    width: 100%;\n    margin-top: 50px;\n    height: 600px;\n    border: 1px solid #ccc;\n}\n\n.editor-toolbar {\n    width: 100%;\n    border-bottom: 1px dotted #555;\n}\n\n.editor-toolbar ul {\n    list-style: none;\n}\n\n.editor-toolbar ul li {\n    width: 20px;\n    height: 20px;\n    line-height: 20px;\n    display: inline-block;\n    cursor: pointer;\n    margin-left: 10px;\n}\n.editor-toolbar ul li .iconfont {\n    font-size: 16px;\n}\n.editor-content {\n    margin-top: 20px;\n    height: 500px;\n    overflow: auto;\n    padding: 0 25px;\n}</pre><p id=\"u7e8195af\" class=\"ne-p\"><br></p><h3 id=\"5302fb6c\"><span class=\"ne-text\">3.4 界面效果</span></h3><p id=\"ua3882f87\" class=\"ne-p\"><br></p><p id=\"u39b1ed59\" class=\"ne-p\"><img src=\"https://gitee.com/hjb2722404/tuchuang/raw/master/img/202203101605654.png\" width=\"1153\" id=\"nKDNy\" class=\"ne-image\"></p><p id=\"ud9abee0a\" class=\"ne-p\"><br></p><p id=\"ufdb4ef13\" class=\"ne-p\"><span class=\"ne-text\">好了，我们写好了界面，下一节，我们将实现编辑器功能。</span></p><p id=\"u72fe1443\" class=\"ne-p\"><br></p><p id=\"u694d1d10\" class=\"ne-p\"><span class=\"ne-text\">（本节内容对应代码可在</span><code class=\"ne-code\"><span class=\"ne-text\">1.0.1</span></code><span class=\"ne-text\"> 分支找到）</span></p></div>",
  "slug": 80566555,
  "title": "富文本编辑器开发系列9——原生API编写简单富文本编辑器001"
}